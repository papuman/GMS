<?xml version="1.0" encoding="utf-8"?>
<odoo noupdate="1">
        <!-- Email Template 1: Invoice Accepted -->
        <record id="email_template_invoice_accepted" model="mail.template">
            <field name="name">Costa Rica - Invoice Accepted</field>
            <field name="model_id" ref="model_l10n_cr_einvoice_document"/>
            <field name="subject">${object.document_type == 'TE' and 'Tiquete' or 'Factura'} Electr√≥nica ${object.name} - Aceptada</field>
            <field name="email_from">${object.company_id.email or user.email or ''}</field>
            <field name="email_to">${object.partner_id.email}</field>
            <field name="lang">${object.partner_id.lang}</field>
            <field name="auto_delete" eval="True"/>
            <field name="body_html" type="html">
<![CDATA[
<div style="font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; font-size: 14px; color: #333; max-width: 700px; margin: 0 auto;">
    <!-- Header with company branding -->
    <table width="100%" cellpadding="0" cellspacing="0" style="background: linear-gradient(135deg, #28a745 0%, #20c997 100%); color: white; padding: 30px 20px; border-radius: 8px 8px 0 0;">
        <tr>
            <td style="text-align: center;">
                % if object.company_id.logo:
                <img src="/logo.png?company=${object.company_id.id}" alt="${object.company_id.name}" style="max-height: 60px; margin-bottom: 15px;"/>
                % endif
                <h1 style="margin: 0; font-size: 28px; font-weight: 300;">
                    ${object.document_type == 'TE' and 'Tiquete' or 'Factura'} Electr√≥nica
                </h1>
                <div style="margin-top: 10px; padding: 8px 16px; background-color: rgba(255,255,255,0.2); border-radius: 20px; display: inline-block;">
                    <strong style="font-size: 16px;">‚úì ACEPTADA POR HACIENDA</strong>
                </div>
            </td>
        </tr>
    </table>

    <!-- Body content -->
    <table width="100%" cellpadding="0" cellspacing="0" style="background-color: white; padding: 30px 20px; border-left: 1px solid #e0e0e0; border-right: 1px solid #e0e0e0;">
        <tr>
            <td>
                <p style="font-size: 16px; margin: 0 0 20px 0;">
                    Estimado/a <strong>${object.partner_id.name}</strong>,
                </p>

                <p style="margin: 0 0 20px 0; line-height: 1.6;">
                    Le informamos que su ${object.document_type == 'TE' and 'tiquete' or 'factura'} electr√≥nica ha sido
                    <strong style="color: #28a745;">aceptada exitosamente</strong> por el Ministerio de Hacienda de Costa Rica.
                </p>

                <!-- Invoice Details Card -->
                <div style="background-color: #f8f9fa; border-left: 4px solid #28a745; padding: 20px; margin: 20px 0; border-radius: 4px;">
                    <table width="100%" cellpadding="8" cellspacing="0">
                        <tr>
                            <td style="width: 40%; color: #666;"><strong>N√∫mero de Documento:</strong></td>
                            <td><strong>${object.name}</strong></td>
                        </tr>
                        <tr>
                            <td style="color: #666;"><strong>Fecha de Emisi√≥n:</strong></td>
                            <td>${format_date(object.invoice_date)}</td>
                        </tr>
                        <tr>
                            <td style="color: #666;"><strong>Monto Total:</strong></td>
                            <td>
                                <strong style="font-size: 18px; color: #28a745;">
                                    ${format_amount(object.amount_total, object.currency_id)}
                                </strong>
                            </td>
                        </tr>
                        % if object.clave:
                        <tr>
                            <td style="color: #666;"><strong>Clave Num√©rica:</strong></td>
                            <td style="font-family: 'Courier New', monospace; font-size: 11px; word-break: break-all;">
                                ${object.clave}
                            </td>
                        </tr>
                        % endif
                        % if object.hacienda_acceptance_date:
                        <tr>
                            <td style="color: #666;"><strong>Fecha de Aceptaci√≥n:</strong></td>
                            <td>${format_datetime(object.hacienda_acceptance_date, tz=object.partner_id.tz, dt_format='dd/MM/yyyy HH:mm:ss')}</td>
                        </tr>
                        % endif
                    </table>
                </div>

                <!-- Verification Section -->
                <div style="background-color: #e7f3ff; border: 1px solid #b3d9ff; padding: 15px; margin: 20px 0; border-radius: 4px;">
                    <p style="margin: 0 0 10px 0;"><strong>üì± Verificaci√≥n del Documento:</strong></p>
                    <p style="margin: 0; font-size: 13px; color: #555; line-height: 1.5;">
                        Puede verificar la autenticidad de este documento electr√≥nico de las siguientes formas:
                    </p>
                    <ul style="margin: 10px 0 0 0; padding-left: 20px; font-size: 13px; color: #555;">
                        <li>Escaneando el c√≥digo QR incluido en el PDF adjunto</li>
                        <li>Ingresando la clave num√©rica en el sitio web de Hacienda</li>
                        <li>Visitando: <a href="https://tribunet.hacienda.go.cr" style="color: #007bff;">tribunet.hacienda.go.cr</a></li>
                    </ul>
                </div>

                <!-- Attachments Notice -->
                <p style="margin: 20px 0 10px 0; font-size: 13px; color: #666;">
                    <strong>üìé Archivos Adjuntos:</strong>
                </p>
                <ul style="margin: 0; padding-left: 20px; font-size: 13px; color: #666;">
                    <li>Factura Electr√≥nica (PDF con c√≥digo QR)</li>
                    <li>Documento XML firmado digitalmente</li>
                </ul>

                % if object.move_id and object.move_id.invoice_payment_term_id:
                <!-- Payment Terms -->
                <div style="background-color: #fff3cd; border-left: 4px solid #ffc107; padding: 15px; margin: 20px 0; border-radius: 4px;">
                    <p style="margin: 0;"><strong>üí≥ Condiciones de Pago:</strong></p>
                    <p style="margin: 5px 0 0 0; font-size: 13px;">
                        ${object.move_id.invoice_payment_term_id.name}
                    </p>
                </div>
                % endif

                <p style="margin: 20px 0 10px 0;">
                    Gracias por su preferencia.
                </p>

                <p style="margin: 0;">
                    Atentamente,<br/>
                    <strong>${object.company_id.name}</strong>
                </p>
            </td>
        </tr>
    </table>

    <!-- Footer -->
    <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #f8f9fa; padding: 20px; border-radius: 0 0 8px 8px; border: 1px solid #e0e0e0; border-top: none;">
        <tr>
            <td style="text-align: center; font-size: 12px; color: #6c757d;">
                <p style="margin: 0 0 10px 0;">
                    <strong>Documento Electr√≥nico Autorizado</strong><br/>
                    Ministerio de Hacienda - Costa Rica
                </p>
                <p style="margin: 0;">
                    ${object.company_id.name}
                    % if object.company_id.vat:
                    | C√©dula Jur√≠dica: ${object.company_id.vat}
                    % endif
                    <br/>
                    % if object.company_id.phone:
                    Tel: ${object.company_id.phone}
                    % endif
                    % if object.company_id.email:
                    | Email: ${object.company_id.email}
                    % endif
                </p>
                <p style="margin: 10px 0 0 0; font-size: 10px; color: #999;">
                    Si desea dejar de recibir estos correos, <a href="#" style="color: #999;">haga clic aqu√≠</a>
                </p>
            </td>
        </tr>
    </table>
</div>
]]>
            </field>
        </record>

        <!-- Email Template 2: Invoice Rejected -->
        <record id="email_template_invoice_rejected" model="mail.template">
            <field name="name">Costa Rica - Invoice Rejected</field>
            <field name="model_id" ref="model_l10n_cr_einvoice_document"/>
            <field name="subject">‚ö†Ô∏è Factura Electr√≥nica ${object.name} - Requiere Atenci√≥n</field>
            <field name="email_from">${object.company_id.email or user.email or ''}</field>
            <field name="email_to">${object.partner_id.email}</field>
            <field name="lang">${object.partner_id.lang}</field>
            <field name="auto_delete" eval="True"/>
            <field name="body_html" type="html">
<![CDATA[
<div style="font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; font-size: 14px; color: #333; max-width: 700px; margin: 0 auto;">
    <!-- Header -->
    <table width="100%" cellpadding="0" cellspacing="0" style="background: linear-gradient(135deg, #dc3545 0%, #c82333 100%); color: white; padding: 30px 20px; border-radius: 8px 8px 0 0;">
        <tr>
            <td style="text-align: center;">
                % if object.company_id.logo:
                <img src="/logo.png?company=${object.company_id.id}" alt="${object.company_id.name}" style="max-height: 60px; margin-bottom: 15px;"/>
                % endif
                <h1 style="margin: 0; font-size: 28px; font-weight: 300;">
                    Factura Electr√≥nica
                </h1>
                <div style="margin-top: 10px; padding: 8px 16px; background-color: rgba(255,255,255,0.2); border-radius: 20px; display: inline-block;">
                    <strong style="font-size: 16px;">‚ö†Ô∏è RECHAZADA</strong>
                </div>
            </td>
        </tr>
    </table>

    <!-- Body -->
    <table width="100%" cellpadding="0" cellspacing="0" style="background-color: white; padding: 30px 20px; border-left: 1px solid #e0e0e0; border-right: 1px solid #e0e0e0;">
        <tr>
            <td>
                <p style="font-size: 16px; margin: 0 0 20px 0;">
                    Estimado/a <strong>${object.partner_id.name}</strong>,
                </p>

                <p style="margin: 0 0 20px 0; line-height: 1.6;">
                    Le informamos que su factura electr√≥nica <strong>${object.name}</strong> ha sido
                    <strong style="color: #dc3545;">rechazada</strong> por el Ministerio de Hacienda.
                </p>

                <div style="background-color: #f8d7da; border-left: 4px solid #dc3545; padding: 15px; margin: 20px 0; border-radius: 4px;">
                    <p style="margin: 0 0 10px 0; color: #721c24;"><strong>‚ö†Ô∏è Motivo del Rechazo:</strong></p>
                    <p style="margin: 0; color: #721c24; font-size: 13px;">
                        ${object.error_message or object.hacienda_message or 'No se especific√≥ el motivo del rechazo.'}
                    </p>
                </div>

                <p style="margin: 20px 0 10px 0; line-height: 1.6;">
                    Estamos trabajando para resolver este inconveniente y le enviaremos un nuevo documento electr√≥nico
                    una vez que sea aceptado por Hacienda.
                </p>

                <p style="margin: 20px 0 10px 0;">
                    Si tiene alguna pregunta, no dude en contactarnos.
                </p>

                <p style="margin: 0;">
                    Atentamente,<br/>
                    <strong>${object.company_id.name}</strong>
                </p>
            </td>
        </tr>
    </table>

    <!-- Footer -->
    <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #f8f9fa; padding: 20px; border-radius: 0 0 8px 8px; border: 1px solid #e0e0e0; border-top: none;">
        <tr>
            <td style="text-align: center; font-size: 12px; color: #6c757d;">
                <p style="margin: 0;">
                    ${object.company_id.name}
                    % if object.company_id.phone:
                    | Tel: ${object.company_id.phone}
                    % endif
                    % if object.company_id.email:
                    | Email: ${object.company_id.email}
                    % endif
                </p>
            </td>
        </tr>
    </table>
</div>
]]>
            </field>
        </record>

        <!-- Email Template 3: Invoice Pending -->
        <record id="email_template_invoice_pending" model="mail.template">
            <field name="name">Costa Rica - Invoice Pending</field>
            <field name="model_id" ref="model_l10n_cr_einvoice_document"/>
            <field name="subject">Factura Electr√≥nica ${object.name} - En Proceso</field>
            <field name="email_from">${object.company_id.email or user.email or ''}</field>
            <field name="email_to">${object.partner_id.email}</field>
            <field name="lang">${object.partner_id.lang}</field>
            <field name="auto_delete" eval="True"/>
            <field name="body_html" type="html">
<![CDATA[
<div style="font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; font-size: 14px; color: #333; max-width: 700px; margin: 0 auto;">
    <!-- Header -->
    <table width="100%" cellpadding="0" cellspacing="0" style="background: linear-gradient(135deg, #ffc107 0%, #ff9800 100%); color: #333; padding: 30px 20px; border-radius: 8px 8px 0 0;">
        <tr>
            <td style="text-align: center;">
                <h1 style="margin: 0; font-size: 28px; font-weight: 300;">
                    Factura Electr√≥nica
                </h1>
                <div style="margin-top: 10px; padding: 8px 16px; background-color: rgba(255,255,255,0.5); border-radius: 20px; display: inline-block;">
                    <strong style="font-size: 16px;">üïê EN PROCESO</strong>
                </div>
            </td>
        </tr>
    </table>

    <!-- Body -->
    <table width="100%" cellpadding="0" cellspacing="0" style="background-color: white; padding: 30px 20px; border-left: 1px solid #e0e0e0; border-right: 1px solid #e0e0e0;">
        <tr>
            <td>
                <p style="font-size: 16px; margin: 0 0 20px 0;">
                    Estimado/a <strong>${object.partner_id.name}</strong>,
                </p>

                <p style="margin: 0 0 20px 0; line-height: 1.6;">
                    Su factura electr√≥nica <strong>${object.name}</strong> ha sido enviada al Ministerio de Hacienda
                    y se encuentra en proceso de validaci√≥n.
                </p>

                <div style="background-color: #fff3cd; border-left: 4px solid #ffc107; padding: 15px; margin: 20px 0; border-radius: 4px;">
                    <p style="margin: 0; color: #856404; font-size: 13px;">
                        <strong>‚ÑπÔ∏è Informaci√≥n:</strong> El proceso de validaci√≥n generalmente toma entre 5 y 15 minutos.
                        Le enviaremos otro correo una vez que el documento sea aceptado.
                    </p>
                </div>

                <p style="margin: 0;">
                    Atentamente,<br/>
                    <strong>${object.company_id.name}</strong>
                </p>
            </td>
        </tr>
    </table>

    <!-- Footer -->
    <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #f8f9fa; padding: 20px; border-radius: 0 0 8px 8px; border: 1px solid #e0e0e0; border-top: none;">
        <tr>
            <td style="text-align: center; font-size: 12px; color: #6c757d;">
                <p style="margin: 0;">
                    ${object.company_id.name}
                    % if object.company_id.email:
                    | Email: ${object.company_id.email}
                    % endif
                </p>
            </td>
        </tr>
    </table>
</div>
]]>
            </field>
        </record>

        <!-- Email Template 4: Credit Note Notification -->
        <record id="email_template_credit_note_notification" model="mail.template">
            <field name="name">Costa Rica - Credit Note Notification</field>
            <field name="model_id" ref="model_l10n_cr_einvoice_document"/>
            <field name="subject">Nota de Cr√©dito Electr√≥nica ${object.name}</field>
            <field name="email_from">${object.company_id.email or user.email or ''}</field>
            <field name="email_to">${object.partner_id.email}</field>
            <field name="lang">${object.partner_id.lang}</field>
            <field name="auto_delete" eval="True"/>
            <field name="body_html" type="html">
<![CDATA[
<div style="font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; font-size: 14px; color: #333; max-width: 700px; margin: 0 auto;">
    <!-- Header -->
    <table width="100%" cellpadding="0" cellspacing="0" style="background: linear-gradient(135deg, #17a2b8 0%, #138496 100%); color: white; padding: 30px 20px; border-radius: 8px 8px 0 0;">
        <tr>
            <td style="text-align: center;">
                <h1 style="margin: 0; font-size: 28px; font-weight: 300;">
                    Nota de Cr√©dito Electr√≥nica
                </h1>
                <div style="margin-top: 10px; padding: 8px 16px; background-color: rgba(255,255,255,0.2); border-radius: 20px; display: inline-block;">
                    <strong style="font-size: 16px;">‚úì ACEPTADA</strong>
                </div>
            </td>
        </tr>
    </table>

    <!-- Body -->
    <table width="100%" cellpadding="0" cellspacing="0" style="background-color: white; padding: 30px 20px; border-left: 1px solid #e0e0e0; border-right: 1px solid #e0e0e0;">
        <tr>
            <td>
                <p style="font-size: 16px; margin: 0 0 20px 0;">
                    Estimado/a <strong>${object.partner_id.name}</strong>,
                </p>

                <p style="margin: 0 0 20px 0; line-height: 1.6;">
                    Adjunto encontrar√° la Nota de Cr√©dito Electr√≥nica autorizada por el Ministerio de Hacienda.
                </p>

                <div style="background-color: #d1ecf1; border-left: 4px solid #17a2b8; padding: 20px; margin: 20px 0; border-radius: 4px;">
                    <table width="100%" cellpadding="8" cellspacing="0">
                        <tr>
                            <td style="width: 40%;"><strong>N√∫mero:</strong></td>
                            <td>${object.name}</td>
                        </tr>
                        <tr>
                            <td><strong>Fecha:</strong></td>
                            <td>${format_date(object.invoice_date)}</td>
                        </tr>
                        <tr>
                            <td><strong>Monto:</strong></td>
                            <td>
                                <strong style="font-size: 18px; color: #17a2b8;">
                                    ${format_amount(object.amount_total, object.currency_id)}
                                </strong>
                            </td>
                        </tr>
                    </table>
                </div>

                <p style="margin: 0;">
                    Atentamente,<br/>
                    <strong>${object.company_id.name}</strong>
                </p>
            </td>
        </tr>
    </table>

    <!-- Footer -->
    <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #f8f9fa; padding: 20px; border-radius: 0 0 8px 8px; border: 1px solid #e0e0e0; border-top: none;">
        <tr>
            <td style="text-align: center; font-size: 12px; color: #6c757d;">
                <p style="margin: 0;">
                    ${object.company_id.name}
                    % if object.company_id.email:
                    | Email: ${object.company_id.email}
                    % endif
                </p>
            </td>
        </tr>
    </table>
</div>
]]>
            </field>
        </record>

        <!-- Email Template 5: Debit Note Notification -->
        <record id="email_template_debit_note_notification" model="mail.template">
            <field name="name">Costa Rica - Debit Note Notification</field>
            <field name="model_id" ref="model_l10n_cr_einvoice_document"/>
            <field name="subject">Nota de D√©bito Electr√≥nica ${object.name}</field>
            <field name="email_from">${object.company_id.email or user.email or ''}</field>
            <field name="email_to">${object.partner_id.email}</field>
            <field name="lang">${object.partner_id.lang}</field>
            <field name="auto_delete" eval="True"/>
            <field name="body_html" type="html">
<![CDATA[
<div style="font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; font-size: 14px; color: #333; max-width: 700px; margin: 0 auto;">
    <!-- Header -->
    <table width="100%" cellpadding="0" cellspacing="0" style="background: linear-gradient(135deg, #6610f2 0%, #5a0fc7 100%); color: white; padding: 30px 20px; border-radius: 8px 8px 0 0;">
        <tr>
            <td style="text-align: center;">
                <h1 style="margin: 0; font-size: 28px; font-weight: 300;">
                    Nota de D√©bito Electr√≥nica
                </h1>
                <div style="margin-top: 10px; padding: 8px 16px; background-color: rgba(255,255,255,0.2); border-radius: 20px; display: inline-block;">
                    <strong style="font-size: 16px;">‚úì ACEPTADA</strong>
                </div>
            </td>
        </tr>
    </table>

    <!-- Body -->
    <table width="100%" cellpadding="0" cellspacing="0" style="background-color: white; padding: 30px 20px; border-left: 1px solid #e0e0e0; border-right: 1px solid #e0e0e0;">
        <tr>
            <td>
                <p style="font-size: 16px; margin: 0 0 20px 0;">
                    Estimado/a <strong>${object.partner_id.name}</strong>,
                </p>

                <p style="margin: 0 0 20px 0; line-height: 1.6;">
                    Adjunto encontrar√° la Nota de D√©bito Electr√≥nica autorizada por el Ministerio de Hacienda.
                </p>

                <div style="background-color: #e7e3fc; border-left: 4px solid #6610f2; padding: 20px; margin: 20px 0; border-radius: 4px;">
                    <table width="100%" cellpadding="8" cellspacing="0">
                        <tr>
                            <td style="width: 40%;"><strong>N√∫mero:</strong></td>
                            <td>${object.name}</td>
                        </tr>
                        <tr>
                            <td><strong>Fecha:</strong></td>
                            <td>${format_date(object.invoice_date)}</td>
                        </tr>
                        <tr>
                            <td><strong>Monto:</strong></td>
                            <td>
                                <strong style="font-size: 18px; color: #6610f2;">
                                    ${format_amount(object.amount_total, object.currency_id)}
                                </strong>
                            </td>
                        </tr>
                    </table>
                </div>

                <p style="margin: 0;">
                    Atentamente,<br/>
                    <strong>${object.company_id.name}</strong>
                </p>
            </td>
        </tr>
    </table>

    <!-- Footer -->
    <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #f8f9fa; padding: 20px; border-radius: 0 0 8px 8px; border: 1px solid #e0e0e0; border-top: none;">
        <tr>
            <td style="text-align: center; font-size: 12px; color: #6c757d;">
                <p style="margin: 0;">
                    ${object.company_id.name}
                    % if object.company_id.email:
                    | Email: ${object.company_id.email}
                    % endif
                </p>
            </td>
        </tr>
    </table>
</div>
]]>
            </field>
        </record>

        <!-- Keep existing generic templates for backward compatibility -->
        <record id="email_template_einvoice" model="mail.template">
            <field name="name">Costa Rica - Electronic Invoice (Generic)</field>
            <field name="model_id" ref="model_l10n_cr_einvoice_document"/>
            <field name="subject">Factura Electr√≥nica ${object.name} - ${object.company_id.name}</field>
            <field name="email_from">${object.company_id.email or ''}</field>
            <field name="email_to">${object.partner_id.email}</field>
            <field name="lang">${object.partner_id.lang}</field>
            <field name="auto_delete" eval="True"/>
            <field name="body_html"><![CDATA[<p>Su factura electr√≥nica ${object.name} est√° disponible.</p>]]></field>
        </record>

        <record id="email_template_eticket" model="mail.template">
            <field name="name">Costa Rica - Electronic Ticket (Generic)</field>
            <field name="model_id" ref="model_l10n_cr_einvoice_document"/>
            <field name="subject">Tiquete Electr√≥nico ${object.name}</field>
            <field name="email_from">${object.company_id.email or ''}</field>
            <field name="email_to">${object.partner_id.email}</field>
            <field name="lang">${object.partner_id.lang}</field>
            <field name="auto_delete" eval="True"/>
            <field name="body_html"><![CDATA[<p>Su tiquete electr√≥nico ${object.name} est√° disponible.</p>]]></field>
        </record>

</odoo>
