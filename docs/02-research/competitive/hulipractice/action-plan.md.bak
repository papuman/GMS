---
title: "HuliPractice Action Plan - 4-Week Implementation Roadmap"
category: "research"
domain: "competitive"
subdomain: "hulipractice"
layer: "action" # Layer 4: Implementation roadmap
audience: ["product-manager", "developer", "team-lead"]
last_updated: "2026-01-01"
status: "production-ready"
version: "1.0.0"
maintainer: "Product Team"
original_date: "2025-12-31"
related_docs:
  - "docs/02-research/competitive/hulipractice/00-INTELLIGENCE-INDEX.md"
  - "docs/02-research/competitive/hulipractice/strategic-analysis.md"
  - "docs/05-implementation/index.md"
keywords: ["hulipractice", "action-plan", "implementation", "roadmap", "feature-parity", "sprint-planning"]
---

# üìç Navigation Breadcrumb
[Home](../../../../index.md) > [Research](../../../index.md) > [Competitive](../../index.md) > [HuliPractice](./00-INTELLIGENCE-INDEX.md) > Action Plan

---

# HuliPractice Intelligence - Action Plan

**Created:** December 31, 2025
**Status:** READY TO EXECUTE
**Layer:** 4 - Action Plans (Implementation Roadmap)

---

## üéØ Goal: Achieve Feature Parity in 4 Weeks

Based on comprehensive HuliPractice analysis, here's your prioritized implementation plan.

---

## Week 1: CRITICAL Blockers (Must-Have for v1.0)

### Task 1.1: Invoice Void/Cancellation Workflow
**Priority:** üî¥ CRITICAL (Blocking for v1.0)
**Effort:** 8-10 hours
**Owner:** Dev team

**Requirements:**
```python
# l10n_cr_einvoice/models/einvoice_document.py

def action_void_invoice(self):
    """
    Void an accepted e-invoice by:
    1. Validate invoice can be voided (must be accepted)
    2. Create matching Nota de Cr√©dito (100% credit)
    3. Submit credit note to Hacienda
    4. Mark original invoice as 'void' state
    5. Update accounting entries
    """
    # Implementation checklist:
    # [ ] Add 'void' state to einvoice_document
    # [ ] Create wizard: reason for void
    # [ ] Generate credit note with reference to original
    # [ ] Auto-submit credit note to Hacienda
    # [ ] Add "Anular" button to invoice form view
    # [ ] Security: only allow void on 'accepted' invoices
    # [ ] Write tests for void workflow
    pass
```

**UI Changes:**
```xml
<!-- Add button to einvoice_document form view -->
<button name="action_void_invoice"
        string="Anular Documento"
        type="object"
        attrs="{'invisible': [('hacienda_state', '!=', 'accepted')]}"/>
```

**Acceptance Criteria:**
- ‚úÖ Button appears on accepted invoices only
- ‚úÖ Wizard prompts for void reason
- ‚úÖ Credit note auto-generated with 100% amount
- ‚úÖ Credit note submitted to Hacienda
- ‚úÖ Original invoice marked as void
- ‚úÖ Accounting entries reversed
- ‚úÖ Tests pass

**Deadline:** January 7, 2026

---

### Task 1.2: Preview Before Hacienda Submission
**Priority:** üî¥ CRITICAL (Error prevention)
**Effort:** 4-6 hours
**Owner:** Dev team

**Requirements:**
```python
# l10n_cr_einvoice/wizards/einvoice_preview_wizard.py

class EinvoicePreviewWizard(models.TransientModel):
    _name = 'l10n_cr.einvoice.preview.wizard'
    _description = 'Preview E-Invoice Before Submission'

    einvoice_id = fields.Many2one('l10n_cr.einvoice.document', required=True)
    pdf_preview = fields.Binary('PDF Preview', compute='_compute_pdf')

    def _compute_pdf(self):
        """Generate preview PDF"""
        for wizard in self:
            wizard.pdf_preview = wizard.einvoice_id._generate_pdf()

    def action_confirm_submit(self):
        """Submit to Hacienda after preview"""
        self.einvoice_id.submit_to_hacienda()
        return {'type': 'ir.actions.act_window_close'}
```

**Workflow Change:**
```
Before:
[Create Invoice] ‚Üí [Submit to Hacienda] ‚Üí Done

After:
[Create Invoice] ‚Üí [Preview] ‚Üí [Confirm] ‚Üí [Submit to Hacienda] ‚Üí Done
                       ‚Üì
                   [Cancel] ‚Üí Edit invoice
```

**Acceptance Criteria:**
- ‚úÖ Preview wizard shows PDF
- ‚úÖ Shows customer name, amount, tax clearly
- ‚úÖ [Cancel] returns to invoice editing
- ‚úÖ [Confirm] submits to Hacienda
- ‚úÖ Can be skipped with checkbox: "Don't show again"

**Deadline:** January 7, 2026

---

### Task 1.3: Research Costa Rica Tax Reports
**Priority:** üî¥ CRITICAL (Required for compliance)
**Effort:** 6-8 hours (research only)
**Owner:** Research/BA

**Research Scope:**

#### D-104 (IVA/VAT Report)
- [ ] Download official D-104 form from Hacienda website
- [ ] Document required fields
- [ ] Identify data sources (einvoice records)
- [ ] Note filing frequency (monthly/quarterly)
- [ ] Find XML/CSV submission format (if any)

#### D-101 (Income Tax Report)
- [ ] Download official D-101 form
- [ ] Document required fields
- [ ] Identify data sources
- [ ] Note filing frequency (annual)

#### D-151 (Hacienda Report)
- [ ] Download official D-151 form
- [ ] Document required fields
- [ ] Identify data sources
- [ ] Note filing frequency

**Deliverables:**
1. **Research document:** `CR-TAX-REPORTS-REQUIREMENTS.md`
2. **Field mapping spreadsheet:** Excel mapping einvoice fields to report fields
3. **Sample data:** Filled example of each report

**Resources:**
- Hacienda official website: https://www.hacienda.go.cr/
- Tax accountant consultation (if needed)
- HuliPractice screenshots (reports section)

**Deadline:** January 10, 2026

---

## Week 2: High-Value Features

### Task 2.1: Clone Invoice Function
**Priority:** üü° HIGH
**Effort:** 2-3 hours
**Owner:** Dev team

**Implementation:**
```python
# l10n_cr_einvoice/models/einvoice_document.py

def action_clone_invoice(self):
    """
    Clone invoice for recurring billing
    - Copies all line items
    - Resets date to today
    - Clears Hacienda status
    - Clears clave
    - Opens new invoice form
    """
    new_invoice = self.copy({
        'date': fields.Date.today(),
        'hacienda_state': 'draft',
        'clave': False,
        'consecutive': False,
        'xml_signed': False,
        'pdf': False,
    })

    return {
        'type': 'ir.actions.act_window',
        'res_model': 'l10n_cr.einvoice.document',
        'res_id': new_invoice.id,
        'view_mode': 'form',
        'target': 'current',
    }
```

**UI:**
```xml
<button name="action_clone_invoice"
        string="Clonar Documento"
        type="object"
        icon="fa-copy"/>
```

**Use Cases:**
- Monthly membership renewals
- Recurring service charges
- Demo/training data generation

**Deadline:** January 14, 2026

---

### Task 2.2: Document Tags System
**Priority:** üü° HIGH
**Effort:** 4-6 hours
**Owner:** Dev team

**Database:**
```python
# l10n_cr_einvoice/models/einvoice_tag.py

class EinvoiceTag(models.Model):
    _name = 'l10n_cr.einvoice.tag'
    _description = 'E-Invoice Tag'
    _order = 'name'

    name = fields.Char(string='Tag Name', required=True, translate=True)
    color = fields.Integer(string='Color Index', default=0)
    active = fields.Boolean(default=True)

# Add to einvoice_document.py
tag_ids = fields.Many2many(
    'l10n_cr.einvoice.tag',
    string='Tags',
    help='Classify invoices by campaign, member type, etc.'
)
```

**Security:**
```csv
# ir.model.access.csv
access_einvoice_tag_user,access_einvoice_tag_user,model_l10n_cr_einvoice_tag,base.group_user,1,0,0,0
access_einvoice_tag_manager,access_einvoice_tag_manager,model_l10n_cr_einvoice_tag,account.group_account_manager,1,1,1,1
```

**Predefined Tags (Gym-Specific):**
```xml
<record id="tag_new_member" model="l10n_cr.einvoice.tag">
    <field name="name">New Member</field>
    <field name="color">1</field>
</record>
<record id="tag_renewal" model="l10n_cr.einvoice.tag">
    <field name="name">Renewal</field>
    <field name="color">2</field>
</record>
<record id="tag_late_payment" model="l10n_cr.einvoice.tag">
    <field name="name">Late Payment</field>
    <field name="color">3</field>
</record>
```

**Deadline:** January 17, 2026

---

## Week 3: UX Improvements

### Task 3.1: Advanced Search Panel
**Priority:** üü° MEDIUM
**Effort:** 3-4 hours
**Owner:** Dev team

**Implementation:**
```xml
<!-- l10n_cr_einvoice/views/einvoice_document_views.xml -->

<record id="view_einvoice_document_tree" model="ir.ui.view">
    <field name="name">einvoice.document.tree.enhanced</field>
    <field name="model">l10n_cr.einvoice.document</field>
    <field name="arch" type="xml">
        <tree>
            <searchpanel>
                <!-- Document Type Filter -->
                <field name="document_type"
                       select="multi"
                       icon="fa-file-text"
                       string="Tipo Documento"/>

                <!-- Payment Status Filter -->
                <field name="payment_status"
                       select="multi"
                       icon="fa-money"
                       string="Estado Pago"/>

                <!-- Hacienda Status Filter -->
                <field name="hacienda_state"
                       select="multi"
                       icon="fa-check-circle"
                       string="Estado Hacienda"/>

                <!-- Tags Filter -->
                <field name="tag_ids"
                       select="multi"
                       icon="fa-tags"
                       string="Etiquetas"/>
            </searchpanel>

            <!-- List columns... -->
        </tree>
    </field>
</record>
```

**Visual Enhancements:**
```xml
<!-- Add status badge widget -->
<field name="hacienda_state" widget="badge"
       decoration-success="hacienda_state == 'accepted'"
       decoration-danger="hacienda_state == 'rejected'"
       decoration-warning="hacienda_state == 'pending'"/>
```

**Deadline:** January 21, 2026

---

### Task 3.2: Visual Status Badges
**Priority:** üü° MEDIUM
**Effort:** 2 hours
**Owner:** Dev team

**Add Computed Fields:**
```python
# l10n_cr_einvoice/models/einvoice_document.py

status_badge = fields.Char('Status Badge', compute='_compute_status_badge')
status_icon = fields.Char('Status Icon', compute='_compute_status_icon')

def _compute_status_badge(self):
    for rec in self:
        if rec.hacienda_state == 'accepted':
            rec.status_badge = '‚úì Aprobado por Hacienda'
        elif rec.hacienda_state == 'rejected':
            rec.status_badge = '‚úó Rechazado por Hacienda'
        elif rec.hacienda_state == 'pending':
            rec.status_badge = '‚è≥ Pendiente aprobaci√≥n'
        else:
            rec.status_badge = '‚ö™ Borrador'
```

**CSS Styling:**
```scss
// Add to module CSS
.einvoice-status-accepted {
    color: #28a745;
    font-weight: bold;
}
.einvoice-status-rejected {
    color: #dc3545;
    font-weight: bold;
}
.einvoice-status-pending {
    color: #ffc107;
    font-weight: bold;
}
```

**Deadline:** January 24, 2026

---

## Week 4: Tax Compliance

### Task 4.1: Implement D-104 Report (VAT)
**Priority:** üî¥ CRITICAL
**Effort:** 8-10 hours
**Owner:** Dev team

**Prerequisites:**
- ‚úÖ Week 1 research completed
- ‚úÖ Field mapping documented
- ‚úÖ Sample data available

**Implementation:**
```python
# l10n_cr_einvoice/reports/hacienda_d104.py

class HaciendaD104Report(models.AbstractModel):
    _name = 'report.l10n_cr_einvoice.hacienda_d104'
    _description = 'Hacienda D-104 VAT Report'

    @api.model
    def _get_report_values(self, docids, data=None):
        """
        Generate D-104 VAT report
        - Period: monthly or quarterly
        - IVA collected (sales)
        - IVA paid (purchases)
        - Net IVA due
        """
        date_from = data.get('date_from')
        date_to = data.get('date_to')

        # Query einvoice data
        sales = self.env['l10n_cr.einvoice.document'].search([
            ('date', '>=', date_from),
            ('date', '<=', date_to),
            ('document_type', 'in', ['FE', 'TE']),
            ('hacienda_state', '=', 'accepted'),
        ])

        # Calculate totals
        total_sales = sum(sales.mapped('total'))
        total_tax = sum(sales.mapped('tax_amount'))

        return {
            'doc_ids': docids,
            'doc_model': 'l10n_cr.einvoice.document',
            'date_from': date_from,
            'date_to': date_to,
            'sales': sales,
            'total_sales': total_sales,
            'total_tax': total_tax,
        }
```

**QWeb Template:**
```xml
<template id="report_hacienda_d104">
    <t t-call="web.html_container">
        <t t-foreach="docs" t-as="o">
            <div class="page">
                <h2>Declaraci√≥n IVA D-104</h2>
                <p>Per√≠odo: <span t-esc="date_from"/> - <span t-esc="date_to"/></p>
                <!-- Report content based on official D-104 format -->
            </div>
        </t>
    </t>
</template>
```

**Deadline:** January 31, 2026

---

### Task 4.2: Implement D-101 & D-151 Reports
**Priority:** üî¥ CRITICAL
**Effort:** 6-8 hours each
**Owner:** Dev team

**Similar structure to D-104, but:**
- D-101: Annual income tax report
- D-151: Comprehensive tax filing report

**Deadline:** January 31, 2026

---

## Month 2: Nice-to-Have Features

### Task 5.1: Proforma/Quote Workflow
**Effort:** 6-8 hours
**Status:** DEFERRED (not blocking)

**Approach:**
- Use Odoo Sale Order as proforma
- Add "Convert to E-Invoice" button when confirmed
- Map sale.order.line ‚Üí einvoice line items

---

### Task 5.2: Nota de D√©bito Support
**Effort:** 4-6 hours
**Status:** DEFERRED (low priority for gyms)

**Use Cases:**
- Late payment fees
- Damage charges
- Additional charges after invoice

---

## Acceptance Criteria (v1.0 Launch)

### Must-Have (Week 1-4)
- [x] Invoice void/cancel workflow ‚Üê **BLOCKING**
- [x] Preview before Hacienda submission ‚Üê **BLOCKING**
- [x] CR tax reports (D-104, D-101, D-151) ‚Üê **BLOCKING**
- [x] Clone invoice function
- [x] Document tags system
- [x] Advanced search panel

### Nice-to-Have (Month 2+)
- [ ] Proforma/quote workflow
- [ ] Nota de D√©bito support
- [ ] Payment history UI enhancements

### Already Have (Competitive Advantages)
- [x] Offline POS mode ‚úÖ
- [x] Auto-retry with exponential backoff ‚úÖ
- [x] Split payments ‚úÖ
- [x] Transparent pricing ‚úÖ
- [x] Integrated platform ‚úÖ

---

## Testing Strategy

### Unit Tests
```bash
# Run after each task
python3 -m pytest l10n_cr_einvoice/tests/
```

### Integration Tests
```bash
# Test complete workflows
python3 -m pytest l10n_cr_einvoice/tests/test_void_workflow.py
python3 -m pytest l10n_cr_einvoice/tests/test_preview_workflow.py
```

### Manual Testing Checklist
- [ ] Create invoice
- [ ] Preview invoice
- [ ] Submit to Hacienda (sandbox)
- [ ] Void invoice
- [ ] Clone invoice
- [ ] Add tags
- [ ] Filter by tags
- [ ] Generate D-104 report
- [ ] Generate D-101 report
- [ ] Generate D-151 report

---

## Risk Management

### Risks & Mitigation

| Risk | Probability | Impact | Mitigation |
|------|-------------|--------|------------|
| D-104/D-101/D-151 format unclear | Medium | HIGH | Hire CR tax accountant for 1-day consultation |
| Void workflow complex (accounting) | Low | MEDIUM | Use Odoo account reversal mechanism |
| Preview PDF slow to generate | Low | LOW | Cache PDF for 5 minutes |
| Tag system unused by customers | Medium | LOW | Pre-populate with gym-specific tags |

---

## Success Metrics

### Week 1
- ‚úÖ Void workflow implemented
- ‚úÖ Preview wizard functional
- ‚úÖ Tax reports research complete

### Week 2
- ‚úÖ Clone function working
- ‚úÖ Tags system deployed

### Week 3
- ‚úÖ Search panel live
- ‚úÖ Visual badges implemented

### Week 4
- ‚úÖ All 3 tax reports functional
- ‚úÖ v1.0 ready for beta testing

---

## Next Steps (Right Now)

### Today
1. ‚úÖ Read full analysis (HULIPRACTICE-COMPETITIVE-ANALYSIS.md)
2. ‚úÖ Review this action plan
3. Create tasks in your project management tool
4. Assign owners for Week 1 tasks

### This Week
5. Start Task 1.1 (void/cancel workflow)
6. Start Task 1.2 (preview wizard)
7. Start Task 1.3 (tax reports research)

### End of Week
8. Code review for void/cancel
9. Test preview workflow
10. Document tax report requirements

---

## Resource Allocation

### Development Team
- **Senior Dev:** Tasks 1.1, 4.1, 4.2 (complex logic)
- **Mid-level Dev:** Tasks 1.2, 2.1, 2.2 (moderate complexity)
- **Junior Dev:** Tasks 3.1, 3.2 (UI/UX)

### Research/BA
- **Business Analyst:** Task 1.3 (tax reports research)
- **QA:** Testing all tasks

### Estimated Total Hours
- Week 1: 18-24 hours
- Week 2: 6-9 hours
- Week 3: 5-6 hours
- Week 4: 20-26 hours
- **Total:** 49-65 hours (1.5 developers for 4 weeks)

---

## Communication Plan

### Daily Standups
- What did you complete yesterday?
- What are you working on today?
- Any blockers?

### Weekly Demo (Fridays)
- Demo completed tasks to stakeholders
- Get feedback
- Adjust next week's priorities

### Sprint Retrospective (End of Month)
- What went well?
- What can improve?
- Action items for Month 2

---

## Conclusion

**You're 80-90% feature complete.**

Fix the 3 CRITICAL gaps in Week 1-4, and you'll have feature parity with HuliPractice's billing module PLUS your competitive advantages (offline POS, transparent pricing, integrated platform).

**LET'S SHIP v1.0 IN 4 WEEKS.** üöÄ

---

**Created:** December 31, 2025
**Next Review:** January 7, 2026 (after Week 1 tasks)
**Owner:** Product/Engineering Lead
