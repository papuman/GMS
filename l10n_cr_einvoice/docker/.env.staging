# ============================================================================
# GMS Staging Environment Configuration
# ============================================================================
# Environment: Staging
# Version: 19.0.1.8.0
# Purpose: Local staging environment for validation testing
# Security: Use test credentials only - DO NOT use production credentials
# ============================================================================

# ----------------------------------------------------------------------------
# PostgreSQL Configuration
# ----------------------------------------------------------------------------
POSTGRES_VERSION=15
POSTGRES_DB=staging_gms
POSTGRES_USER=odoo_staging
# IMPORTANT: Change this password before deployment
POSTGRES_PASSWORD=StagingDB2024!SecurePass

# ----------------------------------------------------------------------------
# Odoo Configuration
# ----------------------------------------------------------------------------
ODOO_VERSION=19.0
ODOO_ADMIN_PASSWD=StagingAdmin2024!SecurePass
# Database filter (security - only allow staging database)
ODOO_DB_FILTER=^staging_gms$

# ----------------------------------------------------------------------------
# Hacienda Sandbox Configuration
# ----------------------------------------------------------------------------
# IMPORTANT: These are SANDBOX credentials - safe for testing
HACIENDA_ENV=sandbox
HACIENDA_SANDBOX_URL=https://api-sandbox.comprobanteselectronicos.go.cr/recepcion/v1
HACIENDA_SANDBOX_USERNAME=cpj-2-415-123456@sandbox.comprobanteselectronicos.go.cr
HACIENDA_SANDBOX_PASSWORD=SandboxTestPassword123

# ----------------------------------------------------------------------------
# SMTP Configuration - Mailtrap (Test Email Service)
# ----------------------------------------------------------------------------
# Sign up at https://mailtrap.io for free test SMTP
SMTP_SERVER=smtp.mailtrap.io
SMTP_PORT=2525
SMTP_USER=your_mailtrap_username
SMTP_PASSWORD=your_mailtrap_password
SMTP_SSL=False
EMAIL_FROM=noreply@staging.gms-cr.com

# ----------------------------------------------------------------------------
# Grafana Configuration
# ----------------------------------------------------------------------------
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=StagingGrafana2024!

# ----------------------------------------------------------------------------
# Application Settings
# ----------------------------------------------------------------------------
ENVIRONMENT=staging
DEBUG=True
LOG_LEVEL=debug

# ----------------------------------------------------------------------------
# Port Configuration (Avoiding conflicts with dev environment)
# ----------------------------------------------------------------------------
# Odoo: 8070 (dev uses 8069)
# PostgreSQL: 5433 (dev uses 5432)
# Nginx: 8080 (dev uses 80)
# Prometheus: 9091 (dev uses 9090)
# Grafana: 3001 (dev uses 3000)

# ----------------------------------------------------------------------------
# Resource Limits (Staging - smaller than production)
# ----------------------------------------------------------------------------
# Odoo workers: 2 (production uses 4-8)
# Max connections: 32 (production uses 64)
# Memory limits: 2GB soft, 2.5GB hard (production uses 4GB/5GB)

# ----------------------------------------------------------------------------
# Certificate Configuration (Test Certificate)
# ----------------------------------------------------------------------------
# Path to test certificate for signing
CERT_FILE=/var/lib/odoo/certificates/test_cert.p12
CERT_PASSWORD=TestCertPassword123

# ----------------------------------------------------------------------------
# Feature Flags (All enabled for testing)
# ----------------------------------------------------------------------------
ENABLE_POS=True
ENABLE_ANALYTICS=True
ENABLE_EMAIL=True
ENABLE_PDF_GENERATION=True
ENABLE_AUTO_SUBMISSION=True

# ----------------------------------------------------------------------------
# Testing Configuration
# ----------------------------------------------------------------------------
# Enable test data population
LOAD_TEST_DATA=True
# Number of test invoices to generate
TEST_INVOICE_COUNT=20
# Number of test customers
TEST_CUSTOMER_COUNT=10
# Number of test products
TEST_PRODUCT_COUNT=25

# ----------------------------------------------------------------------------
# Monitoring Configuration
# ----------------------------------------------------------------------------
PROMETHEUS_ENABLED=True
GRAFANA_ENABLED=True
METRICS_ENDPOINT=/metrics

# ----------------------------------------------------------------------------
# Backup Configuration
# ----------------------------------------------------------------------------
BACKUP_ENABLED=True
BACKUP_RETENTION_DAYS=7
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM

# ----------------------------------------------------------------------------
# Security Settings (Staging)
# ----------------------------------------------------------------------------
# Allow password authentication in staging
ALLOW_PASSWORD_AUTH=True
# Enable CORS for testing
CORS_ENABLED=True
# Disable rate limiting for testing
RATE_LIMIT_ENABLED=False

# ============================================================================
# SETUP INSTRUCTIONS
# ============================================================================
# 1. Copy this file to .env.staging.local and update with your credentials
# 2. Sign up for Mailtrap.io and add your SMTP credentials
# 3. Obtain Hacienda sandbox credentials from your administrator
# 4. Generate or obtain a test certificate for signing
# 5. Run: ./scripts/deploy_staging.sh
# ============================================================================

# ============================================================================
# IMPORTANT SECURITY NOTES
# ============================================================================
# - These are TEST CREDENTIALS ONLY
# - DO NOT use production database credentials
# - DO NOT use production Hacienda credentials
# - DO NOT use production certificates
# - DO NOT expose staging environment to the internet
# - DO NOT commit .env.staging.local to version control
# ============================================================================
