<?xml version="1.0" encoding="utf-8"?>
<odoo noupdate="1">
    <!-- Email Template for Electronic Invoice -->
    <record id="email_template_einvoice" model="mail.template">
        <field name="name">Costa Rica - Electronic Invoice</field>
        <field name="model">l10n_cr.einvoice.document</field>
        <field name="subject">Factura Electrónica ${object.name} - ${object.company_id.name}</field>
        <field name="email_from">${object.company_id.email or ''}</field>
        <field name="email_to">${object.partner_id.email}</field>
        <field name="lang">${object.partner_id.lang}</field>
        <field name="body_html" type="html">
<![CDATA[
<div style="font-family: Arial, sans-serif; font-size: 14px; color: #333;">
    <table width="100%" cellpadding="0" cellspacing="0" style="border-collapse: collapse;">
    <tr>
            <td style="padding: 20px; background-color: #f8f9fa;">
                <table width="600" cellpadding="0" cellspacing="0" style="margin: 0 auto; background-color: white; border: 1px solid #dee2e6;">
                    <!-- Header -->
                    <tr>
                        <td style="padding: 30px; background-color: #007bff; color: white; text-align: center;">
                            <h2 style="margin: 0; font-size: 24px;">Factura Electrónica</h2>
                            <p style="margin: 10px 0 0 0; font-size: 14px;">
                                ${object.company_id.name}
                            </p>
                        </td>
                    </tr>

                    <!-- Body -->
                    <tr>
                        <td style="padding: 30px;">
                            <p style="margin: 0 0 20px 0;">Estimado/a <strong>${object.partner_id.name}</strong>,</p>

                            <p style="margin: 0 0 20px 0;">
                                Adjunto encontrará su factura electrónica autorizada por el Ministerio de Hacienda de Costa Rica.
                            </p>

                            <!-- Invoice Details -->
                            <table width="100%" cellpadding="8" cellspacing="0" style="border: 1px solid #dee2e6; border-collapse: collapse; margin: 0 0 20px 0;">
                                <tr style="background-color: #f8f9fa;">
                                    <td colspan="2" style="border-bottom: 1px solid #dee2e6; padding: 10px;">
                                        <strong>Detalles de la Factura</strong>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="border-bottom: 1px solid #dee2e6; padding: 8px; width: 40%;">
                                        <strong>Número:</strong>
                                    </td>
                                    <td style="border-bottom: 1px solid #dee2e6; padding: 8px;">
                                        ${object.name}
                                    </td>
                                </tr>
                                <tr>
                                    <td style="border-bottom: 1px solid #dee2e6; padding: 8px;">
                                        <strong>Fecha:</strong>
                                    </td>
                                    <td style="border-bottom: 1px solid #dee2e6; padding: 8px;">
                                        ${format_date(object.invoice_date)}
                                    </td>
                                </tr>
                                <tr>
                                    <td style="border-bottom: 1px solid #dee2e6; padding: 8px;">
                                        <strong>Monto Total:</strong>
                                    </td>
                                    <td style="border-bottom: 1px solid #dee2e6; padding: 8px;">
                                        <strong style="font-size: 16px; color: #007bff;">
                                            ${format_amount(object.amount_total, object.currency_id)}
                                        </strong>
                                    </td>
                                </tr>
                                % if object.clave:
                                <tr>
                                    <td style="border-bottom: 1px solid #dee2e6; padding: 8px;">
                                        <strong>Clave Numérica:</strong>
                                    </td>
                                    <td style="border-bottom: 1px solid #dee2e6; padding: 8px; font-family: monospace; font-size: 11px;">
                                        ${object.clave}
                                    </td>
                                </tr>
                                % endif
                                % if object.state == 'accepted':
                                <tr>
                                    <td style="padding: 8px;">
                                        <strong>Estado:</strong>
                                    </td>
                                    <td style="padding: 8px;">
                                        <span style="background-color: #28a745; color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px;">
                                            Aceptado por Hacienda
                                        </span>
                                    </td>
                                </tr>
                                % endif
                            </table>

                            <p style="margin: 0 0 20px 0;">
                                <strong>Verificación:</strong><br/>
                                Puede verificar la autenticidad de esta factura en el sitio web de Hacienda usando:
                            </p>
                            <ul style="margin: 0 0 20px 0; padding-left: 20px;">
                                <li>El código QR incluido en el PDF adjunto</li>
                                <li>La clave numérica proporcionada arriba</li>
                            </ul>

                            % if object.move_id.invoice_payment_term_id:
                            <p style="margin: 0 0 20px 0;">
                                <strong>Condiciones de Pago:</strong><br/>
                                ${object.move_id.invoice_payment_term_id.name}
                            </p>
                            % endif

                            <p style="margin: 0 0 10px 0;">
                                Gracias por su preferencia.
                            </p>

                            <p style="margin: 0;">
                                Atentamente,<br/>
                                <strong>${object.company_id.name}</strong>
                            </p>
                        </td>
                    </tr>

                    <!-- Footer -->
                    <tr>
                        <td style="padding: 20px; background-color: #f8f9fa; text-align: center; font-size: 12px; color: #6c757d; border-top: 1px solid #dee2e6;">
                            <p style="margin: 0 0 10px 0;">
                                <strong>Documento Electrónico Autorizado</strong>
                            </p>
                            <p style="margin: 0;">
                                ${object.company_id.name}<br/>
                                % if object.company_id.vat:
                                Cédula Jurídica: ${object.company_id.vat}<br/>
                                % endif
                                % if object.company_id.phone:
                                Teléfono: ${object.company_id.phone}<br/>
                                % endif
                                % if object.company_id.email:
                                Email: ${object.company_id.email}
                                % endif
                            </p>
                        </td>
                    </tr>
                </table>
            </td>
    </tr>
    </table>
</div>
]]>
            </field>
        <field name="report_template" ref="action_report_einvoice"/>
        <field name="auto_delete" eval="True"/>
    </record>

    <!-- Email Template for Electronic Ticket (simplified version) -->
    <record id="email_template_eticket" model="mail.template">
        <field name="name">Costa Rica - Electronic Ticket</field>
        <field name="model">l10n_cr.einvoice.document</field>
        <field name="subject">Tiquete Electrónico ${object.name} - ${object.company_id.name}</field>
        <field name="email_from">${object.company_id.email or ''}</field>
        <field name="email_to">${object.partner_id.email}</field>
        <field name="lang">${object.partner_id.lang}</field>
        <field name="body_html" type="html">
<![CDATA[
<div style="font-family: Arial, sans-serif; font-size: 14px; color: #333;">
    <p>Estimado/a <strong>${object.partner_id.name}</strong>,</p>

    <p>Adjunto encontrará su tiquete electrónico.</p>

    <p>
    <strong>Número:</strong> ${object.name}<br/>
    <strong>Fecha:</strong> ${format_date(object.invoice_date)}<br/>
    <strong>Monto Total:</strong> ${format_amount(object.amount_total, object.currency_id)}
    </p>

    <p>Gracias por su preferencia.</p>

    <p>
        Atentamente,<br/>
    <strong>${object.company_id.name}</strong>
    </p>
</div>
]]>
            </field>
        <field name="report_template" ref="action_report_einvoice"/>
        <field name="auto_delete" eval="True"/>
    </record>

</odoo>
