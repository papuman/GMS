<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- TiloPay Payment Provider Form View -->
    <record id="payment_provider_form_tilopay" model="ir.ui.view">
        <field name="name">payment.provider.form.tilopay</field>
        <field name="model">payment.provider</field>
        <field name="inherit_id" ref="payment.payment_provider_form"/>
        <field name="arch" type="xml">
            <xpath expr="//group[@name='provider_credentials']" position="after">
                <group name="tilopay_credentials" invisible="code != 'tilopay'">
                    <group>
                        <field name="tilopay_api_key" password="True" placeholder="6609-5850-8330-8034-3464 (sandbox)"/>
                        <field name="tilopay_api_user" placeholder="lSrT45 (sandbox)"/>
                        <field name="tilopay_api_password" password="True" placeholder="Zlb8H9 (sandbox)"/>
                    </group>
                    <group>
                        <field name="tilopay_merchant_code"/>
                        <field name="tilopay_secret_key" password="True"/>
                        <field name="tilopay_use_sandbox"/>
                    </group>
                </group>

                <group name="tilopay_payment_methods" string="Payment Methods" invisible="code != 'tilopay'">
                    <group>
                        <field name="tilopay_enable_sinpe"/>
                        <field name="tilopay_enable_cards"/>
                    </group>
                    <group>
                        <field name="tilopay_enable_yappy"/>
                    </group>
                </group>

                <group name="tilopay_webhook" string="Webhook Configuration" invisible="code != 'tilopay'">
                    <field name="tilopay_webhook_url" readonly="1" widget="url"/>
                    <div colspan="2" class="alert alert-info" role="alert">
                        <strong>Important:</strong> Copy the webhook URL above and configure it in your TiloPay dashboard
                        (Account > Developer > Webhooks). This enables real-time payment notifications.
                    </div>
                </group>

                <div invisible="code != 'tilopay'" class="mt16">
                    <button name="action_test_tilopay_connection"
                            type="object"
                            string="Test Connection"
                            class="btn-primary"/>
                    <p class="text-muted mt8">
                        Test your TiloPay API credentials before enabling the provider.
                    </p>
                </div>
            </xpath>
        </field>
    </record>

    <!-- NOTE: payment_provider_onboarding_form does not exist in Odoo 19.
         TiloPay onboarding help removed until a valid base view is identified. -->

</odoo>
